
var Button=function(e){var t=this,n={debug:!1,tpl:'<button type="button" class="btn btn-md {{cls}} waves-effect" style="border-radius: 0; min-width:75px;" id="{{id}}"><i class="icon {{icon}}" aria-hidden="true"></i><br><span class="text-uppercase hidden-sm-down">{{text}}</span></button>'},i=$.extend({},n,e);return t.$el="",t.id=0,t.debug=function(){i.debug===!0&&console.info.apply(console,arguments)},t.getTpl=function(e){return Handlebars.compile(e)},t.setLoad=function(e){return t.$el.btnload(e===!0?"load":"unload")},t.setDisabled=function(e){return t.$el.prop("disabled",e)},t.addListener=function(e,n){for(var i in e)n.on(i,function(d){t.debug(i,d,e,n),e[i].apply(e[i],[t,d])})},t.init=function(){i.id||(i.id="button-"+(new Date).getTime()+"-"+ ++t.id),t.$el=$(t.getTpl(i.tpl)(i)),t.$el.data("api",t),i.disabled&&t.setDisabled(i.disabled),"function"==typeof i.handler&&("object"!=typeof i.listeners&&(i.listeners={}),i.listeners.click=i.handler),"object"==typeof i.listeners&&t.addListener(i.listeners,t.$el)},t.getElement=function(){return t.$el},t.init()};

var Tab=function(t){var e=this,n={debug:!1,activeTab:0,tplUl:'<ul class="nav nav-tabs nav-tabs-solid" role="tablist"></ul>',tpl:'<li class="nav-item"><a class="nav-link" data-toggle="tab" href="#{{id}}" aria-controls="{{id}}" role="tab" aria-expanded="true">{{title}}</a></li>'},a=$.extend({},n,t);return e.id=0,e.debug=function(){a.debug===!0&&console.info.apply(console,arguments)},e.getTpl=function(t){return Handlebars.compile(t)},e.addListener=function(t,n){for(var a in t)n.on(a,function(i){e.debug(a,i,t,n),t[a].apply(t[a],[e,i])})},e.initScroll=function(){var t=e.$el,n=t.children("ul").eq(0),a=t.parent();t.sly({horizontal:1,itemNav:"basic",smart:1,activateOn:"click",mouseDragging:1,touchDragging:1,releaseSwing:1,startAt:0,scrollBar:a.find(".scrollbar"),scrollBy:1,pagesBar:a.find(".pages"),activatePageOn:"click",speed:300,elasticBounds:1,easing:"easeOutExpo",dragHandle:1,dynamicHandle:1,clickBar:1,forward:a.find(".forward"),backward:a.find(".backward"),prev:a.find(".prev"),next:a.find(".next"),prevPage:a.find(".prevPage"),nextPage:a.find(".nextPage")}),a.find(".toStart").on("click",function(){var e=$(this).data("item");t.sly("toStart",e)}),a.find(".toCenter").on("click",function(){var e=$(this).data("item");t.sly("toCenter",e)}),a.find(".toEnd").on("click",function(){var e=$(this).data("item");t.sly("toEnd",e)}),a.find(".add").on("click",function(){t.sly("add","<li>"+n.children().length+"</li>")}),a.find(".remove").on("click",function(){t.sly("remove",-1)})},e.init=function(){a.id||(a.id="tav-"+(new Date).getTime()+"-"+ ++e.id),e.$el=$("#"+a.id),e.$el.data("api",e),"function"==typeof a.handler&&("object"!=typeof a.listeners&&(a.listeners={}),a.listeners.click=a.handler),"object"==typeof a.listeners&&e.addListener(a.listeners,e.$el),e.$elUl=$(e.getTpl(a.tplUl)({})),$.each(a.items,function(t,n){e.addTabElement(n)}),e.$el.html(e.$elUl),e.$elWrap=e.$el.parent(),e.$elWrap.css({position:"relative"}),e.$el.css({height:"48px","border-bottom":"none",overflow:"hidden"}),e.initScroll(),e.$elUl.css({height:"100%",width:e.$elUl.width()+2+"px"}),e.initEvents(),e.setTabActive(a.activeTab)},e.initEvents=function(){e.$elUl.find('a[data-toggle="tab"]').on("shown.bs.tab",function(t){e.$elUl.find(".active").removeClass("active"),$(t.target).addClass("active"),e.$el.trigger({type:"tabchange",tab:t.target,tabContent:$($(t.target).attr("href"))[0],"shown.bs.tab":t})})},e.getTabsWidth=function(){var t=e.$elUl.find("li"),n=0;return $.each(t,function(){n+=$(this).outerWidth()}),n},e.addTabElement=function(t){var n=$(e.getTpl(a.tpl)(t));e.$elUl.append(n)},e.setTabActive=function(t){var n=e.$elUl.find("a");n[t]&&($(n[t]).tab("show"),$($(n[t]).attr("href")).tab("show"))},e.getElement=function(){return e.$el},e.init()};

var Table=function(e){var n=this,t={debug:!1},o=$.extend({},t,e);n.$el=$("#"+o.id),n.debug=function(){o.debug===!0&&console.info.apply(console,arguments)},n.addListener=function(e,t){for(var o in e)switch(o){case"selectionchange":n.debug("[type=checkbox]",t.find("[type=checkbox]")),t.find("[type=checkbox]").on("change",function(c){n.debug(o,c,e,t);var i=$(this).closest("tr");e[o].apply(e[o],[$(this).prop("checked"),$(this),i,c])});break;default:t.on(o,function(c){n.debug(o,c,e,t),e[o].apply(e[o],[c])})}},n.getRowsSelecteds=function(){var e=[];return n.$el.find(":checked").each(function(){e.push($(this).closest("tr"))}),e},n.init=function(){0===n.$el.length?console.error("Não foi possível encontrar a tabela com o ID #"+o.id):("object"==typeof o.listeners&&n.addListener(o.listeners,n.$el),n.debug("api",n,n.$el),n.$el.data("api",n))},n.init()};

var ToolBar=function(n){var t=this,o={debug:!1,buttons:[]},e=$.extend({},o,n);t.$el=$("#"+e.id),t.debug=function(){e.debug===!0&&console.info.apply(console,arguments)},t.addButtons=function(n){$.each(n,function(n,o){t.addButton(o)})},t.getTpl=function(n){return Handlebars.compile(n)},t.addButton=function(n){var o=new Button(n),e=o.getElement();t.debug(n,e),t.$el.append(e)},t.addListener=function(n,o){for(var e in n)o.on(e,function(a){t.debug(e,a,n,o),n[e].apply(n[e],[a])})},t.init=function(){0===t.$el.length?console.error("Não foi possível encontrar a tabela com o ID #"+e.id):(t.$el.html(""),t.addButtons(e.buttons),t.$el.data("api",t))},t.init()};

function abbrNum(e,t){t=Math.pow(10,t);for(var n=["k","m","b","t"],o=n.length-1;o>=0;o--){var i=Math.pow(10,3*(o+1));if(i<=e){e=Math.round(e*t/i)/t,1e3==e&&o<n.length-1&&(e=1,o++),e+=n[o];break}}return e}function getPageSize(){var e,t;return self.innerHeight?(e=self.innerWidth,t=self.innerHeight):document.documentElement&&document.documentElement.clientHeight?(e=document.documentElement.clientWidth,t=document.documentElement.clientHeight):document.body&&(e=document.body.clientWidth,t=document.body.clientHeight),{width:e,height:t}}function searchToObject(){var e,t,n=window.location.search.substring(1).split("&"),o={};for(t in n)""!==n[t]&&(e=n[t].split("="),o[decodeURIComponent(e[0])]=decodeURIComponent(e[1]));return o}

init.push(function(){System.initSlidePanel()});

window.System={debug:!1,inactive:(new Date).getTime(),timerInactive:null,ajaxExecution:!1},function(e,t,n){"use strict";var o=t.Site;n(e).ready(function(n){function a(){var e=this;e.$panel.find(".slidePanel-close").on("click",function(){e.hide()});var t=e.$panel.find(".slidePanel-inner"),n=-66;n+=e.$panel.find(".slidePanel-header").outerHeight()*-1,n+=e.$panel.find(".slidePanel-footer").outerHeight()*-1,t.find(),t.wrapInner('<div data-auto-height="'+n+'"></div>'),System.initAutoHeight(t)}o.run(),System.getApi=function(e,t,o){var a=[];o||(o={});var e=Plugin.getPlugin(e);return t.each(function(t,i){var l=new e(n(i),o);n(this).data("api",l),a.push(l)}),1===a.length?a[0]:a},System.initSlidePanel=function(e){e=e?e.find('[data-toggle="slidePanel"]'):n('[data-toggle="slidePanel"]');var t=n.extend({},{settings:{method:"GET"},afterShow:a},PluginSlidepanel.default.getDefaults());n.slidePanel.setDefaults(t),e.on("click",function(){n.slidePanel.show({url:n(this).data("url")}),n(".dropdown.open").removeClass("open")})},System.openSlidePanel=function(e){var t=n.extend({},{settings:{method:"GET"},afterShow:a},PluginSlidepanel.default.getDefaults());n.slidePanel.setDefaults(t),n.slidePanel.show(e),n(".dropdown.open").removeClass("open")},System.getPanelApi=function(e){return System.getApi("panel",e)},System.showError=function(t){n(e).trigger("page:ready"),console.error(t),"string"==typeof t&&(t={error:t}),swal("Cancelado!",t.error||t.data.error||"Não foi possível executar está ação. Tente novamente mais tarde.","error")},System.loadHeader=function(){},System.doneHeader=function(){},System.load=function(){n("#mask-loader").remove(),n("body").append('<div id="mask-loader" style="width:100%;height:100%;position:fixed;top:0;left:0;z-index:999999;text-align:center;background-color:rgba(0,0,0,.5)" class="vertical-align"><div class="loader vertical-align-middle loader-tadpole"></div></div>'),setTimeout(function(){System.done()},3e4)},System.done=function(){n("#mask-loader").fadeOut(function(){n(this).remove()})},System.alert=function(e,t,n){t||(t="Atenção"),"object"==typeof alertify?alertify.alert(t,e,n):(alert(e),"function"==typeof n&&n())},System.success=function(e,t){t||(t="Sucesso!"),e||(e="Ação realizada com sucesso. :)"),"function"==typeof swal?swal(t,e,"success"):"object"==typeof alertify&&alertify.success(e)},System.confirm=function(e,t,n,o,a){n||(n="Confirmação"),t||(t=function(){}),o||(o="Sim"),a||(a="Não");var i=function(e,n,o){"function"==typeof t&&t(e,n,o)};"function"==typeof swal?swal({title:n,text:e,type:"warning",showCancelButton:!0,confirmButtonColor:"#46be8a",confirmButtonText:o,cancelButtonText:a,closeOnConfirm:!1,closeOnCancel:!1},function(e){System.load(),i(e,function(e,t){System.done(),swal(t||"Sucesso!",e||"Ação realizada com sucesso. :)","success")},function(e,t){System.done(),swal(t||"Cancelado!",e||"A ação foi cancelada.","error")})}):"object"==typeof alertify?alertify.confirm(e,function(e){i(!e.cancel)}).set("title",n):i(confirm(e))},System.showLogin=function(e){e||(e={});var t=n.extend({success:function(){},failure:function(e){System.showError(e)}},e),o=Handlebars.compile(n("#tpl-modal-login").html()),a=n(o(t));n("#modal-login").remove();var i=a.find("form");i.form({url:PATH+"/users/login",success:function(){alertify.success("Autenticado com sucesso!"),a.modal("hide")},alertError:function(e){alertify.error(e)}}),n("body").append(a),a.modal({show:!0,keyboard:!1,backdrop:"static"})},System.initStores=function(){var e=function(t,o,a){if(System.debug===!0&&console.log("init"),t>=o.length)return"function"==typeof a&&a(),!0;var i=n(o[t]);switch(System.debug===!0&&console.log("element",i,i[0].tagName),i[0].tagName){case"SELECT":i.combobox({url:PATH+i.data("url"),valueField:i.data("valuefield"),displayField:i.data("displayfield"),value:i.data("value"),success:function(){e(++t,o,a)},failure:function(n){e(++t,o,a),System.showError(n)}})}i.addClass("store-inited")};e(0,n('[data-plugin="select"]:not(".store-inited")'),function(){System.debug===!0&&console.log("stores inicializados!")})},System.getControllerScope=function(){var t=e.querySelector("[ng-app=app]"),n=angular.element(t).scope();return n.$$childHead},System.getUser=function(){var e=System.getControllerScope();return e.User},System.getPerson=function(){var e=System.getControllerScope();return e.User.Person},System.setUser=function(e){var t=System.getControllerScope();t.$apply(function(){t.User=e,t.Person=e.Person})},System.initAjaxEvents=function(){n(e).ajaxStart(function(){System.ajaxExecution=!0}).ajaxComplete(function(){System.ajaxExecution=!1})},System.initAutoHeight=function(e){e||(e=n("body")),e.find("[data-auto-height]").each(function(){var e=n(this);if("content"!==e.data("role")){e.attr("data-role","content"),e.removeClass("overflow-auto");var t=n('<div data-plugin="scrollable"><div data-role="container"></div></div>');t.height(getPageSize().height+parseInt(e.data("auto-height"))),e.wrap(t),e.closest('[data-plugin="scrollable"]').asScrollable(PluginAsscrollable.default.getDefaults())}else e.closest('[data-plugin="scrollable"]').height(getPageSize().height+parseInt(e.data("auto-height"))),e.closest('[data-plugin="scrollable"]').asScrollable("update")})},System.initAjaxEvents(),n(t).on("load",function(){System.initStores(),System.initAutoHeight()}).on("resize",function(){System.initAutoHeight()}),n(e).on("page:loading",function(){System.loadHeader()}).on("page:ready",function(){System.doneHeader()}),init instanceof Array&&n.each(init,function(e,t){"function"==typeof t&&t()})})}(document,window,jQuery);