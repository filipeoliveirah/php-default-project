
function abbrNum(e,t){t=Math.pow(10,t);for(var n=["k","m","b","t"],o=n.length-1;o>=0;o--){var i=Math.pow(10,3*(o+1));if(i<=e){e=Math.round(e*t/i)/t,1e3==e&&o<n.length-1&&(e=1,o++),e+=n[o];break}}return e}function getPageSize(){var e,t;return self.innerHeight?(e=self.innerWidth,t=self.innerHeight):document.documentElement&&document.documentElement.clientHeight?(e=document.documentElement.clientWidth,t=document.documentElement.clientHeight):document.body&&(e=document.body.clientWidth,t=document.body.clientHeight),{width:e,height:t}}function searchToObject(){var e,t,n=window.location.search.substring(1).split("&"),o={};for(t in n)""!==n[t]&&(e=n[t].split("="),o[decodeURIComponent(e[0])]=decodeURIComponent(e[1]));return o};
window.System={debug:!1,inactive:(new Date).getTime(),timerInactive:null,ajaxExecution:!1},function(e,t,o){"use strict";var n=t.Site;o(e).ready(function(){n.run(),System.showError=function(t){o(e).trigger("page:ready"),console.error(t),"string"==typeof t&&(t={error:t}),swal("Cancelado!",t.error||t.data.error||"Não foi possível executar está ação. Tente novamente mais tarde.","error")},System.loadHeader=function(){NProgress.done(!0),NProgress.configure({template:'<div class="bar nprogress-bar-header" style="left:265px" role="bar"></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'}),NProgress.start(),setTimeout(function(){System.doneHeader()},3e4)},System.doneHeader=function(){NProgress.done(!0)},System.load=function(){o("#mask-loader").remove(),o("body").append('<div id="mask-loader" style="width:100%;height:100%;position:fixed;top:0;left:0;z-index:999999;text-align:center;background-color:rgba(0,0,0,.5)" class="vertical-align"><div class="loader vertical-align-middle loader-tadpole"></div></div>'),setTimeout(function(){System.done()},3e4)},System.done=function(){o("#mask-loader").fadeOut(function(){o(this).remove()})},System.alert=function(e,t){t||(t="Atenção"),"object"==typeof alertify?alertify.alert(e).set("title",t):alert(e)},System.success=function(e,t){t||(t="Sucesso!"),e||(e="Ação realizada com sucesso. :)"),"function"==typeof swal?swal(t,e,"success"):"object"==typeof alertify&&alertify.success(e)},System.confirm=function(e,t,o,n,i){o||(o="Confirmação"),t||(t=function(){}),n||(n="Sim"),i||(i="Não");var a=function(e,o,n){"function"==typeof t&&t(e,o,n)};"function"==typeof swal?swal({title:o,text:e,type:"warning",showCancelButton:!0,confirmButtonColor:"#46be8a",confirmButtonText:n,cancelButtonText:i,closeOnConfirm:!1,closeOnCancel:!1},function(e){System.load(),a(e,function(e,t){System.done(),swal(t||"Sucesso!",e||"Ação realizada com sucesso. :)","success")},function(e,t){System.done(),swal(t||"Cancelado!",e||"A ação foi cancelada.","error")})}):"object"==typeof alertify?alertify.confirm(e,function(e){a(!e.cancel)}).set("title",o):a(confirm(e))},System.initTimerLogout=function(){o(e).on("mousemove focus click keyup",function(){System.inactive=(new Date).getTime()}),System.timerInactive=setInterval(function(){((new Date).getTime()-System.inactive)/1e3>=1200&&(clearInterval(System.timerInactive),System.timerInactive=void 0,rest({url:PATH+"/usuarios/check/log"}))},3e4)},System.saveLogs=function(){return System.ajaxExecution===!0?(console.info("Aguardando execução Ajax em andamento..."),setTimeout(System.saveLogs,5e3),!1):void rest({method:"POST",beforeSend:function(){},url:PATH+"/usuarios/log",failure:function(e){console.error(e),setTimeout(System.saveLogs,5e3)}})},System.showLogin=function(e){e||(e={});var t=o.extend({success:function(){},failure:function(e){System.showError(e)}},e),n=Handlebars.compile(o("#tpl-modal-login").html()),i=o(n(t));o("#modal-login").remove();var a=i.find("form");a.form({url:PATH+"/usuarios/login",success:function(){alertify.success("Autenticado com sucesso!"),i.modal("hide")},alertError:function(e){alertify.error(e)}}),o("body").append(i),i.modal({show:!0,keyboard:!1,backdrop:"static"})},System.initStores=function(){var e=function(t,n,i){if(System.debug===!0&&console.log("init"),t>=n.length)return"function"==typeof i&&i(),!0;var a=o(n[t]);switch(System.debug===!0&&console.log("element",a,a[0].tagName),a[0].tagName){case"SELECT":a.combobox({url:PATH+a.data("url"),valueField:a.data("valuefield"),displayField:a.data("displayfield"),value:a.data("value"),success:function(){e(++t,n,i)},failure:function(o){e(++t,n,i),System.showError(o)}})}a.addClass("store-inited")};e(0,o('[data-plugin="select"]:not(".store-inited")'),function(){System.debug===!0&&console.log("stores inicializados!")})},System.initAjaxEvents=function(){o(e).ajaxStart(function(){System.ajaxExecution=!0}).ajaxComplete(function(){System.ajaxExecution=!1})},System.initAjaxEvents(),o(t).on("load",function(){System.initStores(),System.initTimerLogout()}),o(e).on("page:loading",function(){System.loadHeader()}).on("page:ready",function(){System.doneHeader()}),init instanceof Array&&o.each(init,function(e,t){"function"==typeof t&&t()})})}(document,window,jQuery);