<div class="page">
	<div class="page-content p-0">
		<div class="row-fluid">
			<div class="col-sm-4 p-0">
				<div class="panel m-b-0" id="panel-usuarios">
					<div class="panel-heading">
						<h3 class="panel-title">Usuários</h3>
						<div class="form-group p-x-25">
		                  <div class="input-group">
		                    <input type="text" class="form-control" name="" placeholder="Filtrar...">
		                    <span class="input-group-btn">
		                      <button type="submit" class="btn btn-primary waves-effect"><i class="icon md-search" aria-hidden="true"></i></button>
		                    </span>
		                  </div>
		                </div>
					</div>

					<ul class="list-group list-group-full list-group-dividered overflow-auto" data-auto-height="-162"></ul>
			           
				</div>
			</div>
			<div class="col-sm-8">
				<div class="p-y-15">
					<div class="row-fluid">
						<div class="col-sm-6 p-0">
							<div class="panel m-b-0" id="panel-permissao">
								<div class="panel-heading">
									<h3 class="panel-title">Permissões</h3>
									<div class="panel-actions panel-actions-keep">
						                <a class="panel-action icon md-refresh-alt" data-toggle="panel-refresh" data-load-type="round-circle" data-load-callback="customRefreshCallback" aria-hidden="true"></a>
						            </div>
					            </div>
								<div class="panel-body p-b-0" >
									<ul class="list-group list-group-full list-group-dividered overflow-auto" data-auto-height="-121"></ul>
								</div>
						    </div>
						</div>
						<div class="col-sm-6 p-0">
							<div class="panel m-b-0" id="panel-menu">
								<div class="panel-heading">
									<h3 class="panel-title">Menu Final</h3>
									<div class="panel-actions panel-actions-keep">
						                <a class="panel-action icon md-refresh-alt" data-toggle="panel-refresh" data-load-type="round-circle" data-load-callback="customRefreshCallback" aria-hidden="true"></a>
						            </div>
					            </div>
								<div class="panel-body overflow-auto" data-auto-height="-121">
									<div id="jstreeExample_4"></div>
								</div>
							</div>
						</div>
					</div>
				</div>	
			</div>
		</div>
	</div>
</div>
<script id="tpl-usuario-row" type="text/x-handlebars-template">
<li class="list-group-item p-x-25">
	<div class="media">
	  <div class="media-left">
	    <a class="avatar" href="javascript:void(0)">
	      <img class="img-fluid" src="{$path}/res/theme/material/global/portraits/1.jpg" alt="...">
	    </a>
	  </div>
	  <div class="media-body">
	    <h4 class="media-heading">{{despessoa}}</h4>
	    <small>@{{desusuario}}</small>
	  </div>
	  <div class="media-right">
	    <button type="button" class="btn btn-pure btn-dark icon md-edit waves-effect" data-toggle="slidePanel" data-url="{$pathAdmin}/usuarios/{{idusuario}}"></button>
	  </div>
	</div>
</li>
</script>
<script id="tpl-permissao-row" type="text/x-handlebars-template">
<li class="list-group-item">
    <div class="checkbox-custom checkbox-primary">
        <input type="checkbox" id="inputSchedule-1" value="1" name="inputCheckboxesSchedule">
        <label for="inputSchedule-1">
            <span>{{despermissao}}</span>
        </label>
    </div>
</li>
</script>
<script>
init.push(function(){

	var tpl = {
		usuarioRow:Handlebars.compile($('#tpl-usuario-row').html()),
		permissaoRow:Handlebars.compile($('#tpl-permissao-row').html())
	};

	var panelUsuarios = System.getPanelApi($('#panel-usuarios'));
	var panelPermissoes = System.getPanelApi($('#panel-permissao'));
	var panelMenus = System.getPanelApi($('#panel-menu'));

	var $ulUsuarios = $('#panel-usuarios ul');

	function loadUsuarios(){

		panelUsuarios.load();

		rest({
			url:PATH+"/usuarios",
			success:function(r){

				$ulUsuarios.html('');

				$.each(r.data, function(index, row){
					var $row = $(tpl.usuarioRow(row));
					$ulUsuarios.append($row);
				});

				panelUsuarios.done();

				initSlidePanel($ulUsuarios);

			}
		});

	}

	loadUsuarios();

	$('#jstreeExample_4').jstree({
      'core': {
        'data': {
          "url": PATH+"/res/theme/material/base/assets/data/treeview_jstree.json",
          "dataType": "json"
        }
      }
    });

});
</script>