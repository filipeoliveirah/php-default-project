<style>
	.slidePanel{
		overflow: overlay;
	}
</style>
<link rel="stylesheet" href="{$path}/res/css/slide-panel.css">
<header class="slidePanel-header">
  <div class="overlay-top overlay-panel overlay-background bg-indigo-600">
    <div class="slidePanel-actions btn-group btn-group-flat" aria-label="actions" role="group">      
      <button type="button" class="btn btn-pure slidePanel-close icon md-close" aria-hidden="true"></button>
    </div>
    <h4 class="stage-name"><h5 class="taskboard-stage-title text-uppercase">Dados de {$lugar.deslugar}</h5></h4>
  </div>  
</header>
<div class="slidePanel-inner m-t-40">
	
	<form id="form-lugar">
	
		<div class="form-group form-material" data-plugin="formMaterial">
			<label class="form-control-label">Lugar</label>
			<input type="text" name="deslugar" class="form-control">
		</div>

		<div class="form-group form-material" data-plugin="formMaterial">
			<label class="form-control-label">Tipo do Lugar</label>
			<select name="idlugartipo" id="lugartipoPanel" class="form-control"></select>
		</div>

		<div class="form-group form-material" data-plugin="formMaterial">
			<label class="form-control-label">Descrição</label>
			<textarea name="desconteudo" class="form-control" cols="30" rows="5"></textarea>
		</div>

		<label class="form-control-label"><h4>Endereço</h4></label>
		<div class="row">
			<div class="form-group form-material col-sm-4" data-plugin="formMaterial">
				<label class="form-control-label">Tipo do Endereço</label>
				<select name="idenderecotipo" class="form-control"></select>
			</div>
			<div class="form-group form-material col-sm-4" data-plugin="formMaterial">
				<label class="form-control-label">Endereço</label>
				<input type="text" name="desendereco" class="form-control">
			</div>
			<div class="form-group form-material col-sm-4" data-plugin="formMaterial">
				<label class="form-control-label">Número</label>
				<input type="text" name="desnumero" class="form-control">
			</div>

			<div class="form-group form-material col-sm-4" data-plugin="formMaterial">
				<label class="form-control-label">Complemento</label>
				<input type="text" name="descomplemento" class="form-control">
			</div>
			<div class="form-group form-material col-sm-4" data-plugin="formMaterial">
				<label class="form-control-label">Bairro</label>
				<input type="text" name="desbairro" class="form-control">
			</div>
			<div class="form-group form-material col-sm-4" data-plugin="formMaterial">
				<label class="form-control-label">Cidade</label>
				<input type="text" name="descidade" class="form-control">
			</div>

			<div class="form-group form-material col-sm-4" data-plugin="formMaterial">
				<label class="form-control-label">Estado</label>
				<input type="text" name="desestado" class="form-control">
			</div>
			<div class="form-group form-material col-sm-4" data-plugin="formMaterial">
				<label class="form-control-label">País</label>
				<input type="text" name="despais" class="form-control">
			</div>
			<div class="form-group form-material col-sm-4" data-plugin="formMaterial">
				<label class="form-control-label">CEP</label>
				<input type="text" name="descep" class="form-control">
			</div>
		</div>

		<div class="form-group form-material" data-plugin="formMaterial">
			<button type="submit" class="btn btn-primary waves-effect">Salvar</button>
		</div>

	</form>

</div>

<script>

var lugar = JSON.parse('{function="json_encode($lugar)"}');

var form = $("#form-lugar");

form.formLoad(lugar);
	
$("[name=idlugartipo]#lugartipoPanel").combobox({
	url:PATH+"/lugares/tipos",
	displayField:"deslugartipo",
	valueField:"idlugartipo",
	value:lugar.idlugartipo
});

$("[name=idenderecotipo]").combobox({
	url:PATH+"/enderecostipos",
	displayField:"desenderecotipo",
	valueField:"idenderecotipo",
	value:lugar.idenderecotipo
});

form.form({
	url:PATH+"/lugares",
	resetForm:false,
	params:{
		idlugar:lugar.idlugar,
		idendereco:lugar.idendereco,
		idpessoa:lugar.idpessoa
	},
	success:function(){
		System.success("Lugar salvo com sucesso");
		$("#form-filtros [type=submit]").trigger("click");
	},
	failure:function(r){
		System.showError(r);
	}
});

</script>