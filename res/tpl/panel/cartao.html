{include="panel-header"}
<div id="cartao-{$cartao.idcartao}">
    <header class="slidePanel-header">
        <div class="slidePanel-actions" aria-label="actions" role="group">
            <button type="button" class="btn btn-pure btn-inverse slidePanel-close actions-top icon wb-close"
            aria-hidden="true">
            </button>
        </div>
        <h1>
            Cartão de Crédito número {$cartao.desnumero}
        </h1>
    </header>
    <div class="slidePanel-inner">
        <form asutocomplete="off" id="form-cartao" class="slidePanel-form">
            <div class="form-group form-material">
                <input type="hidden" name="idcartao" value="{$cartao.idcartao}">
                <label class="control-label" for="desnome">
                    Nome
                </label>
                <input type="text" class="form-control" name="desnome" value="{$cartao.desnome}">
            </div>
            <div class="form-group form-material">
                <label class="control-label" for="dtvalidade">
                    Data de Validade
                </label>
                <input type="date" class="form-control" id="dtvalidade" name="dtvalidade"
                value="{$cartao.dtvalidade}">
            </div>
            <div class="form-group form-material">
                <label class="control-label" for="desnumero">
                    Número do Cartão
                </label>
                <input type="text" class="form-control" id="desnumero" name="desnumero"
                value="{$cartao.desnumero}">
            </div>
            <button type="submit" class="btn btn-block btn-primary" id="btn-cartao-salvar">
                Salvar
            </button>
        </form>
    </div>
</div>
<script>
var cartao = JSON.parse('{function="json_encode($cartao)"}');
  
var form = $("#form-cartao");

form.form({
  resetForm:false,
  url:PATH+"/cartoes",
  success:function(){

    form.find("button#btn-cartao-salvar").btnload("unload");
    System.success("Cartão salvo com sucesso");
    $("button.slidePanel-close").trigger("click");
    $(".refresh").trigger("click");

  },
  failure:function(r){

    form.find("button#btn-cartao-salvar").btnload("unload");
    System.showError(r);

  }
});</script>