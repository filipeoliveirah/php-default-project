<link rel="stylesheet" href="{$path}/res/css/slide-panel.css"><header class="slidePanel-header"><div class="overlay-top overlay-panel overlay-background bg-indigo-600"><div class="slidePanel-actions btn-group btn-group-flat" aria-label="actions" role="group"><button type="button" class="btn btn-pure slidePanel-close icon md-close" aria-hidden="true"></button></div><h4 class="stage-name"><h5 class="taskboard-stage-title text-uppercase">Carrinho</h5></h4></div></header><div class="slidePanel-inner panel m-t-40"><div class="row"><div class="col-sm-4"><h4>Pessoa</h4><p>{$carrinho.despessoa}</div><div class="col-sm-4"><h4>Valor total(líquido)</h4><p>R$ {$carrinho.vltotal}</div><div class="col-sm-4"><h4>Valor total(bruto)</h4><p>R$ {$carrinho.vltotalbruto}</div></div><label class="form-control-label"><h4>Produtos</h4></label><div class="panel panel-produtos"><table class="table table-striped table-hover"><thead><tr><th>Produto<th>Tipo do Produto<th>Valor do Produto<th>Data de remoção<tbody></table></div><label class="form-control-label"><h4>Cupom usado</h4></label><div class="panel panel-cupons"><table class="table table-striped table-hover"><thead><tr><th>Cupom<th>Tipo do Cupom<th>Desconto<th>Código do cupom<tbody></table></div><label class="form-control-label"><h4>Frete usado</h4></label><div class="panel panel-frete"><table class="table table-striped table-hover"><thead><tr><th>CEP<th>Valor do Frete<tbody></table></div></div><script id="tpl-row" type="text/x-handlebars-compile"><tr>
		<td>{{desproduto}}</td>
		<td>{{desprodutotipo}}</td>
		<td>R$ {{vlpreco}}</td>
		<td>{{dtremovido}}</td>
	</tr></script><script id="tpl-cupom-row" type="text/x-handlebars-compile"><tr>
		<td>{{descupom}}</td>
		<td>{{descupomtipo}}</td>
		<td>{{nrdesconto}}</td>
		<td>{{descodigo}}</td>
	</tr></script><script id="tpl-frete-row" type="text/x-handlebars-compile"><tr>
		<td>{{descep}}</td>
		<td>{{vlfrete}}</td>		
	</tr></script><script>(function(){
	
	var carrinho = JSON.parse('{function="json_encode($carrinho)"}');

	var $panel = System.getPanelApi($(".slidePanel-inner"));

	var $tbodyProdutos = $(".panel-produtos tbody");
	var $tbodyCupons = $(".panel-cupons tbody");
	var $tbodyFrete = $(".panel-frete tbody");

	var tpl = Handlebars.compile($("#tpl-row").html());
	var tplCupons = Handlebars.compile($("#tpl-cupom-row").html());
	var tplFrete = Handlebars.compile($("#tpl-frete-row").html());

	function load(){

		$panel.load();

		$tbodyProdutos.html('');

		$.each(carrinho.Produtos, function(index, row){

			var $tr = $(tpl(row));

			$tbodyProdutos.append($tr);

			if(row.dtremovido != null){
				$tr.css("color", "#f44336");
			}

		});

		$tbodyCupons.html('');

		$.each(carrinho.Cupons, function(index, row){

			var $tr = $(tplCupons(row));

			$tbodyCupons.append($tr);

		});

		$tbodyFrete.html('');

		var $trFrete = $(tplFrete(carrinho.Frete));

		$tbodyFrete.append($trFrete);

		$panel.done();

	}

	load();

})();</script>